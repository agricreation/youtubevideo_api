const admin="Techey Guys",BASE_URI="http://localhost/htdocs/";var visitorsInfo=BASE_URI+"?getvisitorsinfo",visitorsInfoArray=[],emailsubscribers=[],contactMessage=[];function createVisitorTableRow(e){return`
        <tr>
            <td>${e.region}</td>
            <td><i class="fa-brands fa-firefox-browser"></i></td>
            <td>${e.time}</td>
            <td>${e.country}</td>
            <td>${e.timezone}</td>
            <td>${e.ip}</td>
        </tr>`}function createEmailTable(e){return`
    <tr>
        <td>${e.email_details}</td>
    </tr>`}function createMessageTable(e){return`<tr>
    <td>${e.email}</td>
    <td>${e.telegram_link}</td>
    <td>${e.message}</td>
  </tr>`}class VisitorInfo{constructor({city:e,country:t,id:n,ip:a,loc:o,region:r,time:i,timezone:s,user_agent:c}){this.city=e,this.country=t,this.id=n,this.ip=a,this.loc=o,this.region=r,this.time=i,this.timezone=s,this.user_agent=c}}function fetchNotionApiOfClientReview(){$.ajax({url:BASE_URI+"?getnotiondatabase=1&dbid=clientReview",method:"GET",dataType:"json",success:function(e){createClientReview(e)},error:function(){console.error("Failed to fetch data from the endpoint.")}})}function createClientReview(e){$.each(e.results,function(e,t){var n=$("#clientReview"),a=t.properties.client_name.rich_text[0].text.content,o=t.properties.client_review.rich_text[0].text.content,r=t.properties.client_image.files[0].name;"Done"==t.properties.Status.status.name?n.append(`
            <div class="col">
            <div class="card card-hover mb-3">
              <div class="row  g-0">
                <div class="col-md-2">
                  <img
                    src="${r}"
                    class="img-fluid rounded-start" alt="Loading..."
                    style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="col-md-10">
                  <div class="card-body">
                    <h5 class="card-title  skeleton-loader">${a}</h5>
                    <p class="card-text  skeleton-loader">${o}</p>
                    <div class="d-flex justify-content-between align-items-end">
                      <div>
                        <span class="badge rounded-pill text-bg-primary skeleton-loader">Video Editing</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
            `):console.log("Its Not live")})}$.ajax({url:visitorsInfo,method:"GET",dataType:"json",success:function(e){$.each(e.visitor,function(e,t){t={city:t.city,country:t.country,id:t.id,ip:t.ip,loc:t.loc,region:t.region,time:t.time,timezone:t.timezone,user_agent:t.user_agent};visitorsInfoArray.push(t),$("#visitorTable").append(createVisitorTableRow(t))}),$.each(e.emailsubscribers,function(e,t){emailsubscribers.push(t),$("#subscribersTable").append(createEmailTable(t))}),$.each(e.contactmessage,function(e,t){contactMessage.push(t),$("#contactTable").append(createMessageTable(t))}),$(".dashbordTotalSubscribers").text(emailsubscribers.length),$(".dashbordTotalVisitors").text(visitorsInfoArray.length)},error:function(e,t,n){console.error("Error:",n)}}),fetchNotionApiOfClientReview();var updateAjaxCall=document.querySelector(".updateAjaxCall"),updateVideoDetailsAjaxCall=document.querySelector(".updateVideoDetails");function getVideoDetailsByUrl(){var t=$(".getVideoDetaialByUrl").val().match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);t&&t[1]?(t=t[1],$.getJSON("https://www.googleapis.com/youtube/v3/videos?part=snippet&id="+t+"&key=AIzaSyBG7YBeYmcINh0XGBJ52IFOHHfse9cXFrg",function(e){e.items&&e.items[0]&&e.items[0].snippet?(e=e.items[0].snippet,$(".getVideoId").val(t),$(".getVideoTitle").val(e.title),$(".getVideoImage").val(e.thumbnails.high.url),$(".getVideoDescriptionInfo").val(e.description)):$("#result").html("Video details not found.")})):$("#result").html("Invalid YouTube URL. Couldn't extract video ID.")}updateVideoDetailsAjaxCall.addEventListener("click",e=>{e.preventDefault();var n=document.querySelector(".modalId").innerText,a=document.querySelector(".modalImage").value,o=document.querySelector(".modalTitle").value,r=document.querySelector(".modalDes").value,i=document.querySelector(".modelVideoSelects").selectedIndex,s=document.querySelector(".modelVideoCatogries").selectedIndex,c=document.querySelector(".modelVideoType").selectedIndex,e=document.querySelector(".modalChecked").checked;if(""==n&&""==a&&""==o&&""==r)createALertButton("Please fill required fields","danger");else{let t=1;e||(t=0);var e=new FormData,d=(e.append("videoId",n),e.append("videoImage",a),e.append("videoTitle",o),e.append("videoInfo",r),e.append("channel",i+1),e.append("catogries",s+1),e.append("type",c+1),e.append("isLive",t),new XMLHttpRequest),l=BASE_URI+"?updatedata";d.open("POST",l,!0),d.onload=function(){var e;200===d.status?"success"==(e=JSON.parse(d.responseText)).status?(createALertButton(e.message,"success"),updateUpdatedDatataInUI(n,a,o,r,channelIdArray[i],categoriesArray[s],videoTypeId[c],t)):createALertButton(e.message,"danger"):console.error("Error: "+d.status)},d.onerror=function(){createALertButton("Check Your Network","danger")},d.send(e)}}),updateAjaxCall.addEventListener("click",t=>{t.preventDefault();var t=document.querySelector(".getVideoId").value,n=document.querySelector(".getVideoImage").value,a=document.querySelector(".getVideoTitle").value,o=document.querySelector(".getVideoDescriptionInfo").value,r=document.querySelector(".videoSelectss").selectedIndex,i=document.querySelector(".videoCatogriess").selectedIndex,s=document.querySelector(".videoTypess").selectedIndex,c=document.querySelector(".updateVideo #flexSwitchCheckCheckedAddNew").checked;if(""==t&&""==n&&""==a&&""==o)createALertButton("Please fill required fields","danger");else{let e=1;c||(e=0);var c=new FormData,d=(c.append("videoId",t),c.append("videoImage",n),c.append("videoTitle",a),c.append("videoInfo",o),c.append("channel",r),c.append("catogries",i),c.append("type",s),c.append("isLive",e),new XMLHttpRequest),t=BASE_URI+"?update";d.open("POST",t,!0),d.onload=function(){var e;200===d.status?"success"==(e=JSON.parse(d.responseText)).status?(createALertButton(e.message,"success"),document.querySelector(".getVideoId").value="",document.querySelector(".getVideoImage").value="",document.querySelector(".getVideoTitle").value="",document.querySelector(".getVideoDescription").value="",document.querySelector(".videoSelects").selectedIndex=1,document.querySelector(".videoCatogries").selectedIndex=1,document.querySelector(".videoType").selectedIndex=1,document.querySelector("#flexSwitchCheckChecked").value=1):createALertButton(e.message,"danger"):console.error("Error: "+d.status)},d.onerror=function(){createALertButton("Check Your Network","danger")},d.send(c)}});var burgerMenu=document.querySelectorAll(".burgerMenu"),closeBurgerMenu=document.querySelectorAll(".closeBugermenu");function createALertButton(e,t){const n=document.getElementById("liveAlertPlaceholder");var a;e=e,t=t,(a=document.createElement("div")).innerHTML=[`<div class="alert bg-${t} alert-dismissible" role="alert">`,`   <div>${e}</div>`,'   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',"</div>"].join(""),n.append(a),RemoveToast()}closeBurgerMenu.forEach(e=>{var t=document.querySelector(".left_div");e.addEventListener("click",()=>{t.classList.remove("left_div_open")})}),burgerMenu.forEach(e=>{e.addEventListener("click",()=>{var e=document.querySelector(".left_div");e.classList.contains("left_div_open")?e.classList.remove("left_div_open"):e.classList.add("left_div_open")})}),document.addEventListener("DOMContentLoaded",function(){const n=document.querySelectorAll(".tab"),a=document.querySelectorAll(".tab-content");n.forEach((e,t)=>{e.addEventListener("click",()=>{a.forEach(e=>e.classList.remove("active")),n.forEach(e=>e.classList.remove("activeBar")),a[t].classList.add("active"),n[t].classList.add("activeBar")})})});let categoriesArray=[],channelIdArray=[],videoTypeId=[],apiResponce;function appendCategoriesToDOM(e){let n=document.querySelector(".channelContent");n.innerHTML="",e.forEach(e=>{var t=document.createElement("p");t.textContent=e,n.appendChild(t)})}function appendChannelToDOM(e){let n=document.querySelector(".catogriesContent");n.innerHTML="",e.forEach(e=>{var t=document.createElement("p");t.textContent=e,n.appendChild(t)})}function appendTpeToDOM(e){let n=document.querySelector(".typeContent");n.innerHTML="",e.forEach(e=>{var t=document.createElement("p");t.textContent=e,n.appendChild(t)})}function createSelect(e,t){document.querySelectorAll("."+e).forEach(function(n){t.forEach(function(e){var t=document.createElement("option");t.value=e,t.text=e,n.appendChild(t)}),n.options[1].selected=!0})}function updateDashbord(e){document.querySelector(".dashbordTotalVideos").innerText=e,document.querySelector(".dashbordTotalLive").innerText=e,document.querySelector(".dashbordTotalCatogries").innerText=categoriesArray.length}async function fetchData(){try{var e=await fetch(BASE_URI);if(!e.ok)throw new Error("Network response was not ok");for(var t=await e.json(),n=mapApiResponseToDataObject(t),a=0;a<n.length;a++)createTableRow(n[a]);return updateDashbord(t.length),t}catch(e){console.error("Error fetching data:",e)}}function mapApiResponseToDataObject(e){return e.map(e=>(e.snippet.category&&!categoriesArray.includes(e.snippet.category)&&categoriesArray.push(e.snippet.category),e.snippet.channelId&&!channelIdArray.includes(e.snippet.channelId)&&channelIdArray.push(e.snippet.channelId),e.snippet.type&&!videoTypeId.includes(e.snippet.type)&&videoTypeId.push(e.snippet.type),{id:e.id.videoId||"",image:e.snippet.thumbnails.high.url||"",title:e.snippet.title||"",info:e.snippet.description||"",channelId:e.snippet.channelTitle||"",catogries:e.snippet.category||"",type:e.snippet.type||"",islive:e.snippet.islive||""}))}function createTableRow(e){var t=document.createElement("tr"),n=document.createElement("td"),a=document.createElement("button");a.classList.add("btn","btn-danger","getModel","m-2"),a.setAttribute("id",e.id),a.setAttribute("data-bs-toggle","modal"),a.setAttribute("data-bs-target","#editModel"),a.innerHTML='<i class="fa-solid fa-pen-to-square "></i> Edit ',n.append(a),t.classList.add("card-hover"),t.appendChild(n);(n=document.createElement("th")).setAttribute("scope","row"),n.classList.add("display-none"),n.textContent=e.id,t.appendChild(n);for(var a=document.createElement("td"),n=document.createElement("img"),o=(n.classList.add("img-fluid","thumnail","p-2","rounded","mb-0"),n.setAttribute("src",e.image),n.setAttribute("alt",""),a.appendChild(n),t.appendChild(a),[e.title,e.info,e.channelId,e.catogries,e.type,e.islive]),r=0;r<o.length;r++){var i=document.createElement("td");i.classList.add("text-truncate"),i.textContent=o[r],t.appendChild(i)}n=document.querySelector("tbody");0<=n.childElementCount&&document.querySelector(".spinner").classList.add("visually-hidden"),n.appendChild(t)}function updateUpdatedDatataInUI(e,t,n,a,o,r,i,s){e=document.querySelector("#"+e).parentElement.parentElement;e.childNodes[2].childNodes[0].src=t,e.childNodes[3].innerText=n,e.childNodes[4].innerText=a,e.childNodes[5].innerText=o,e.childNodes[6].innerText=r,e.childNodes[7].innerText=i,e.childNodes[8].innerText=s}function generateHash(e){e=(new TextEncoder).encode(e);return crypto.subtle.digest("SHA-256",e).then(e=>{return Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join("")})}function generateUniqueHash(e){return generateHash(e+Math.random().toString())}function fetchNotionApi(){$.ajax({url:BASE_URI+"?getnotiondatabase=1&dbid=todo",method:"GET",dataType:"json",success:function(e){createContent(e)},error:function(){console.error("Failed to fetch data from the endpoint.")}})}function createContent(e){$("#notionContainer");const a=$(".notionHolding"),o=$(".notionProcessing"),r=$(".notionLive");$.each(e.results,function(e,t){var n=t.properties.Status.status.name,t=`
        <div class="card card-hover mb-3" style="max-width: 540px;">
        <div class="row g-0">
            <div class="col">
                <div class="card-body">
                    <h5 class="card-title h6">${t.properties.Name.title[0].text.content}</h5>
                    <div class="d-flex justify-content-between align-items-end">
                    <div>
                        <span class="badge rounded-pill skeleton-loader 
                        ${"Done"===n?"text-bg-success":"Not started"!==n&&"In progress"===n?"text-bg-warning":"text-bg-danger"}
                        ">
                        
                        <div class="spinner-grow" role="status">
  <span class="visually-hidden">Loading...</span>
</div>
                        ${"Done"===n?"Done":"Not started"===n?"Not Processed":"In progress"===n?"In Progress":"Nothing"}</span> 
                    </div>                                    
                </div>
                </div>
            </div>
        </div>
    </div>`;"Done"==n&&r.append(t),"Not started"==n&&o.append(t),"In progress"==n&&a.append(t)})}appendCategoriesToDOM(categoriesArray),appendChannelToDOM(categoriesArray),appendTpeToDOM(categoriesArray),document.addEventListener("DOMContentLoaded",async function(){var e="getcatogriesinfo";try{var t=await(await fetch(BASE_URI+"?"+e)).json();categoriesArray=t.catogries.map(function(e){return e.toLowerCase()})}catch(e){console.error("Error fetching data:",e)}await 0,await createSelect("videoCatogries",categoriesArray),await createSelect("videoCatogriess",categoriesArray),await appendCategoriesToDOM(categoriesArray)}),document.addEventListener("DOMContentLoaded",async function(){var e="getchannelinfo";try{var t=await fetch(BASE_URI+"?"+e),n=await(apiResponce=t).json();channelIdArray=n.channel.map(function(e){return e.toLowerCase()})}catch(e){console.error("Error fetching data:",e)}await 0,await createSelect("videoSelects",channelIdArray),await createSelect("videoSelectss",channelIdArray),await appendChannelToDOM(channelIdArray)}),document.addEventListener("DOMContentLoaded",async function(){var e="getvideoinfo";try{var t=await(await fetch(BASE_URI+"?"+e)).json();videoTypeId=t.videoinfo.map(function(e){return e.toLowerCase()})}catch(e){console.error("Error fetching data:",e)}await 0,await createSelect("videoType",videoTypeId),await createSelect("videoTypess",videoTypeId),await appendTpeToDOM(videoTypeId)}),fetchData(),document.addEventListener("click",function(e){var t,n,a,o,r,i,s;e.target.classList.contains("getModel")&&(t=e.target.parentElement.parentElement.cells[1].innerText,n=e.target.parentElement.parentElement.cells[2].lastChild.src,a=e.target.parentElement.parentElement.cells[3].innerText,o=e.target.parentElement.parentElement.cells[4].innerText,r=e.target.parentElement.parentElement.cells[5].innerText,i=e.target.parentElement.parentElement.cells[6].innerText,s=e.target.parentElement.parentElement.cells[7].innerText,e=e.target.parentElement.parentElement.cells[8].innerText,r=channelIdArray.indexOf(r),i=categoriesArray.indexOf(i),s=videoTypeId.indexOf(s),document.querySelector(".modalId").innerText=t,document.querySelector(".modalTitle").value=a,document.querySelector(".modalImage").value=n,document.querySelector(".modalDes").value=o,document.querySelector(".modalChecked").checked=1==e,document.querySelector(".modelVideoSelects").selectedIndex=r,document.querySelector(".modelVideoCatogries").selectedIndex=i,document.querySelector(".modelVideoType").selectedIndex=s)}),fetchNotionApi();class RSSFeed{constructor(e){console.log("RssFeeder "+e[0].rss.channel.title),console.log(e),this.rss={channel:this.parseChannel(e.rss.channel)||null}}parseChannel(e){return e?{title:e.title||null,link:e.link||null,description:e.description||null,image:this.parseImage(e.image)||null,item:this.parseItem(e.item)||null}:null}parseImage(e){return e?{title:e.title||null,link:e.link||null,url:e.url||null}:null}parseItem(e){if(!e)return null;var t=[];for(const n of["title","link","guid","description","pubDate","og_title","og_description","og_url","og_type","og_image","twitter_card","twitter_site","twitter_title","twitter_description","twitter_image","dc_language","dc_format","dc_identifier","category"])t[n]=e[n]||null;return t}}class RSSItems{constructor(n){this.items=[],$.each(n,(e,t)=>{e=n[e].rss.channel.item;$.each(e,(e,t)=>{this.items.push(t)})})}}function fetchDataAndPopulateContent(){$.ajax({url:BASE_URI+"?rssfetch",method:"GET",dataType:"json",success:function(e){populateContent(e)},error:function(){console.error("Failed to fetch data from the endpoint.")}})}const feedReader=$(".feedReader");let objectForRss=[];const contentContainerLength=$("#contentContainer").children().length;function showRssFeeder(e){objectForRss[0].items[e].category;var t=objectForRss[0].items[e].title,e=objectForRss[0].items[e].description;$("#rssFeedTitle").text(t),$("#rssFeedBody").html(e)}function populateContent(s){var e=new RSSItems(s),c=(objectForRss.push(e),console.log(objectForRss),$("#contentContainer")),d=$("#rssTitle");$.each(s,function(t,n){var a=n.rss.channel.title.replace(/ /g,"_");const o=a;let r,i=0;generateUniqueHash(o).then(e=>{r=e,console.log(`Unique Hash value for ${o}: `+r);e=`<button type="button" id=${r} class="${a} rssbutton card-blur rounded p-1 me-2 mb-3 btn btn-secondary" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-original-title="All Added videos">
        ${n.rss.channel.title}
       </button>`;d.append(e),$.each(s[t].rss.channel.item,function(e,t){t=`
                 <div data-bs-target="#feedReader" data-bs-toggle="modal" class="col rssCard  ${a}${r}" id="${i}">
                     <div class="card card-hover mb-3" style="max-width: 540px;">
                         <div class="row  g-0">
                             <div class="col-md-4">
                                 <img src="${t.og_image}" class="img-fluid rounded-start" alt="Loading..." style="width: 100%; height: 100%; object-fit: cover;">
                             </div>
                             <div class="col-md-8">
                                 <div class="card-body">
                                     <h5 class="card-title clamp-2 skeleton-loader">${t.og_title}</h5>
                                     <p class="card-text clamp-2 skeleton-loader">${t.og_description}</p>
                                     <div class="d-flex justify-content-between align-items-end">
                                     <div>
                                      <span class="badge rounded-pill text-bg-primary skeleton-loader">${n.rss.channel.title}</span> 
                                      <span class="badge rounded-pill text-bg-success skeleton-loader">${t.category}</span> 
                                      </div>                                    
                                     <a href="${t.link}" class="text-primary link-underline link-underline-opacity-0">Visit</a>
                                    </div>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
             `;c.append(t),i++})}).catch(e=>console.error("Error generating hash:",e))})}$("#contentContainer").on("click",".rssCard",function(){var e=$(this).index();console.log("Clicked on child at position:",e),showRssFeeder(e)}),$(function(){$(".rssbutton").each(function(){var e=$(this).attr("id");console.log("---------"),$(this).on("click",function(){console.log("ID for clicked element with class 'rssbutton': "+e)})})}),fetchDataAndPopulateContent(),$(document).ready(function(){setTimeout(function(){$("#cardContainer .skeleton-loader").addClass("d-none"),$("#cardContainer img, #cardContainer .card-title, #cardContainer .card-text, #cardContainer .badge, #cardContainer a").removeClass("d-none")},2e3)}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".getModel").forEach(function(r){r.addEventListener("click",function(e){var t=r.parentElement.parentElement.cells[1].innerText,n=(r.parentElement.parentElement.cells[2].lastChild.src,r.parentElement.parentElement.cells[3].innerText),a=r.parentElement.parentElement.cells[4].innerText,o=(r.parentElement.parentElement.cells[5].innerText,r.parentElement.parentElement.cells[6].innerText,r.parentElement.parentElement.cells[7].innerText,r.parentElement.parentElement.cells[8].innerText);document.querySelector(".modalId").innerText=t,document.querySelector(".modalTitle").value=n,document.querySelector(".modalDes").value=a,document.querySelector(".modalChecked").checked=1==o})}),document.querySelectorAll(".getModel")[0]}),$(document).ready(function(){const e="AIzaSyAvDMW8O-oJJd2iIP7ATyj8EgfmB7YZjHE";var t;$.ajax({type:"GET",url:"https://www.googleapis.com/youtube/v3/search",data:{key:e,part:"snippet",maxResults:1,type:"video",videoEmbeddable:!0},success:function(e){},error:function(e){}}),t="UC79ikm9mQLz_I53CKOBeXKA",$(document).ready(function(){$.ajax({url:"https://www.googleapis.com/youtube/v3/channels",method:"GET",data:{part:"statistics,snippet",id:t,key:e},success:function(e){var t=e.items[0].statistics,e=e.items[0].snippet;t.subscriberCount,e.title}})})});
//# sourceMappingURL=app.js.map