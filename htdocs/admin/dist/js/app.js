const admin="Techey Guys",BASE_URI="http://localhost/htdocs/";var visitorsInfo=BASE_URI+"?getvisitorsinfo",visitorsInfoArray=[],emailsubscribers=[],contactMessage=[];function createVisitorTableRow(e){return`
        <tr>
            <td>${e.region}</td>
            <td><i class="fa-brands fa-firefox-browser"></i></td>
            <td>${e.time}</td>
            <td>${e.country}</td>
            <td>${e.timezone}</td>
            <td>${e.ip}</td>
        </tr>`}function createEmailTable(e){return`
    <tr>
        <td>${e.email_details}</td>
    </tr>`}function createMessageTable(e){return`<tr>
    <td>${e.email}</td>
    <td>${e.telegram_link}</td>
    <td>${e.message}</td>
  </tr>`}class VisitorInfo{constructor({city:e,country:t,id:n,ip:a,loc:r,region:o,time:d,timezone:c,user_agent:i}){this.city=e,this.country=t,this.id=n,this.ip=a,this.loc=r,this.region=o,this.time=d,this.timezone=c,this.user_agent=i}}$.ajax({url:visitorsInfo,method:"GET",dataType:"json",success:function(e){$.each(e.visitor,function(e,t){t={city:t.city,country:t.country,id:t.id,ip:t.ip,loc:t.loc,region:t.region,time:t.time,timezone:t.timezone,user_agent:t.user_agent};visitorsInfoArray.push(t),$("#visitorTable").append(createVisitorTableRow(t))}),$.each(e.emailsubscribers,function(e,t){emailsubscribers.push(t),$("#subscribersTable").append(createEmailTable(t))}),$.each(e.contactmessage,function(e,t){contactMessage.push(t),$("#contactTable").append(createMessageTable(t))}),$(".dashbordTotalSubscribers").text(emailsubscribers.length),$(".dashbordTotalVisitors").text(visitorsInfoArray.length)},error:function(e,t,n){console.error("Error:",n)}});var updateAjaxCall=document.querySelector(".updateAjaxCall"),updateVideoDetailsAjaxCall=document.querySelector(".updateVideoDetails");function getVideoDetailsByUrl(){var t=$(".getVideoDetaialByUrl").val().match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);t&&t[1]?(t=t[1],$.getJSON("https://www.googleapis.com/youtube/v3/videos?part=snippet&id="+t+"&key=AIzaSyBG7YBeYmcINh0XGBJ52IFOHHfse9cXFrg",function(e){e.items&&e.items[0]&&e.items[0].snippet?(e=e.items[0].snippet,$(".getVideoId").val(t),$(".getVideoTitle").val(e.title),$(".getVideoImage").val(e.thumbnails.high.url),$(".getVideoDescriptionInfo").val(e.description)):$("#result").html("Video details not found.")})):$("#result").html("Invalid YouTube URL. Couldn't extract video ID.")}updateVideoDetailsAjaxCall.addEventListener("click",e=>{e.preventDefault();var n=document.querySelector(".modalId").innerText,a=document.querySelector(".modalImage").value,r=document.querySelector(".modalTitle").value,o=document.querySelector(".modalDes").value,d=document.querySelector(".modelVideoSelects").selectedIndex,c=document.querySelector(".modelVideoCatogries").selectedIndex,i=document.querySelector(".modelVideoType").selectedIndex,e=document.querySelector(".modalChecked").checked;if(""==n&&""==a&&""==r&&""==o)createALertButton("Please fill required fields","danger");else{let t=1;e||(t=0);var e=new FormData,l=(e.append("videoId",n),e.append("videoImage",a),e.append("videoTitle",r),e.append("videoInfo",o),e.append("channel",d+1),e.append("catogries",c+1),e.append("type",i+1),e.append("isLive",t),new XMLHttpRequest),s=BASE_URI+"?updatedata";l.open("POST",s,!0),l.onload=function(){var e;200===l.status?"success"==(e=JSON.parse(l.responseText)).status?(createALertButton(e.message,"success"),updateUpdatedDatataInUI(n,a,r,o,channelIdArray[d],categoriesArray[c],videoTypeId[i],t)):createALertButton(e.message,"danger"):console.error("Error: "+l.status)},l.onerror=function(){createALertButton("Check Your Network","danger")},l.send(e)}}),updateAjaxCall.addEventListener("click",t=>{t.preventDefault();var t=document.querySelector(".getVideoId").value,n=document.querySelector(".getVideoImage").value,a=document.querySelector(".getVideoTitle").value,r=document.querySelector(".getVideoDescriptionInfo").value,o=document.querySelector(".videoSelectss").selectedIndex,d=document.querySelector(".videoCatogriess").selectedIndex,c=document.querySelector(".videoTypess").selectedIndex,i=document.querySelector(".updateVideo #flexSwitchCheckCheckedAddNew").checked;if(""==t&&""==n&&""==a&&""==r)createALertButton("Please fill required fields","danger");else{let e=1;i||(e=0);var i=new FormData,l=(i.append("videoId",t),i.append("videoImage",n),i.append("videoTitle",a),i.append("videoInfo",r),i.append("channel",o),i.append("catogries",d),i.append("type",c),i.append("isLive",e),new XMLHttpRequest),t=BASE_URI+"?update";l.open("POST",t,!0),l.onload=function(){var e;200===l.status?"success"==(e=JSON.parse(l.responseText)).status?(createALertButton(e.message,"success"),document.querySelector(".getVideoId").value="",document.querySelector(".getVideoImage").value="",document.querySelector(".getVideoTitle").value="",document.querySelector(".getVideoDescription").value="",document.querySelector(".videoSelects").selectedIndex=1,document.querySelector(".videoCatogries").selectedIndex=1,document.querySelector(".videoType").selectedIndex=1,document.querySelector("#flexSwitchCheckChecked").value=1):createALertButton(e.message,"danger"):console.error("Error: "+l.status)},l.onerror=function(){createALertButton("Check Your Network","danger")},l.send(i)}});var burgerMenu=document.querySelectorAll(".burgerMenu"),closeBurgerMenu=document.querySelectorAll(".closeBugermenu");function createALertButton(e,t){const n=document.getElementById("liveAlertPlaceholder");var a;e=e,t=t,(a=document.createElement("div")).innerHTML=[`<div class="alert bg-${t} alert-dismissible" role="alert">`,`   <div>${e}</div>`,'   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',"</div>"].join(""),n.append(a),RemoveToast()}closeBurgerMenu.forEach(e=>{var t=document.querySelector(".left_div");e.addEventListener("click",()=>{t.classList.remove("left_div_open")})}),burgerMenu.forEach(e=>{e.addEventListener("click",()=>{var e=document.querySelector(".left_div");e.classList.contains("left_div_open")?e.classList.remove("left_div_open"):e.classList.add("left_div_open")})}),document.addEventListener("DOMContentLoaded",function(){const n=document.querySelectorAll(".tab"),a=document.querySelectorAll(".tab-content");n.forEach((e,t)=>{e.addEventListener("click",()=>{a.forEach(e=>e.classList.remove("active")),n.forEach(e=>e.classList.remove("activeBar")),a[t].classList.add("active"),n[t].classList.add("activeBar")})})});let categoriesArray=[],channelIdArray=[],videoTypeId=[],apiResponce;function appendCategoriesToDOM(e){let n=document.querySelector(".channelContent");n.innerHTML="",e.forEach(e=>{var t=document.createElement("p");t.textContent=e,n.appendChild(t)})}function appendChannelToDOM(e){let n=document.querySelector(".catogriesContent");n.innerHTML="",e.forEach(e=>{var t=document.createElement("p");t.textContent=e,n.appendChild(t)})}function appendTpeToDOM(e){let n=document.querySelector(".typeContent");n.innerHTML="",e.forEach(e=>{var t=document.createElement("p");t.textContent=e,n.appendChild(t)})}function createSelect(e,t){document.querySelectorAll("."+e).forEach(function(n){t.forEach(function(e){var t=document.createElement("option");t.value=e,t.text=e,n.appendChild(t)}),n.options[1].selected=!0})}function updateDashbord(e){document.querySelector(".dashbordTotalVideos").innerText=e,document.querySelector(".dashbordTotalLive").innerText=e,document.querySelector(".dashbordTotalCatogries").innerText=categoriesArray.length}async function fetchData(){try{var e=await fetch(BASE_URI);if(!e.ok)throw new Error("Network response was not ok");for(var t=await e.json(),n=mapApiResponseToDataObject(t),a=0;a<n.length;a++)createTableRow(n[a]);return updateDashbord(t.length),t}catch(e){console.error("Error fetching data:",e)}}function mapApiResponseToDataObject(e){return e.map(e=>(e.snippet.category&&!categoriesArray.includes(e.snippet.category)&&categoriesArray.push(e.snippet.category),e.snippet.channelId&&!channelIdArray.includes(e.snippet.channelId)&&channelIdArray.push(e.snippet.channelId),e.snippet.type&&!videoTypeId.includes(e.snippet.type)&&videoTypeId.push(e.snippet.type),{id:e.id.videoId||"",image:e.snippet.thumbnails.high.url||"",title:e.snippet.title||"",info:e.snippet.description||"",channelId:e.snippet.channelTitle||"",catogries:e.snippet.category||"",type:e.snippet.type||"",islive:e.snippet.islive||""}))}function createTableRow(e){var t=document.createElement("tr"),n=document.createElement("td"),a=document.createElement("button");a.classList.add("btn","btn-danger","getModel","m-2"),a.setAttribute("id",e.id),a.setAttribute("data-bs-toggle","modal"),a.setAttribute("data-bs-target","#editModel"),a.innerHTML='<i class="fa-solid fa-pen-to-square "></i> Edit ',n.append(a),t.classList.add("card-hover"),t.appendChild(n);(n=document.createElement("th")).setAttribute("scope","row"),n.classList.add("display-none"),n.textContent=e.id,t.appendChild(n);for(var a=document.createElement("td"),n=document.createElement("img"),r=(n.classList.add("img-fluid","thumnail","p-2","rounded","mb-0"),n.setAttribute("src",e.image),n.setAttribute("alt",""),a.appendChild(n),t.appendChild(a),[e.title,e.info,e.channelId,e.catogries,e.type,e.islive]),o=0;o<r.length;o++){var d=document.createElement("td");d.classList.add("text-truncate"),d.textContent=r[o],t.appendChild(d)}n=document.querySelector("tbody");0<=n.childElementCount&&document.querySelector(".spinner").classList.add("visually-hidden"),n.appendChild(t)}function updateUpdatedDatataInUI(e,t,n,a,r,o,d,c){e=document.querySelector("#"+e).parentElement.parentElement;e.childNodes[2].childNodes[0].src=t,e.childNodes[3].innerText=n,e.childNodes[4].innerText=a,e.childNodes[5].innerText=r,e.childNodes[6].innerText=o,e.childNodes[7].innerText=d,e.childNodes[8].innerText=c}function fetchDataAndPopulateContent(){$.ajax({url:"http://localhost/htdocs/?rssfetch",method:"GET",dataType:"json",success:function(e){populateContent(e)},error:function(){console.error("Failed to fetch data from the endpoint.")}})}function populateContent(r){var o=$("#contentContainer"),d=$("#rssTitle");$.each(r,function(e,n){var a=n.rss.channel.title.replace(/ /g,"_"),t=`<button type="button" class="${a} card-blur rounded p-1 me-2 mb-3 btn btn-secondary" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-original-title="All Added videos">
       ${n.rss.channel.title}
      </button>`;d.append(t),$.each(r[e].rss.channel.item,function(e,t){t=`
                <div class="col ${a}">
                    <div class="card card-hover mb-3" style="max-width: 540px;">
                        <div class="row  g-0">
                            <div class="col-md-4">
                                <img src="${t.og_image}" class="img-fluid rounded-start" alt="Loading..." style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="col-md-8">
                                <div class="card-body">
                                    <h5 class="card-title clamp-2 skeleton-loader">${t.og_title}</h5>
                                    <p class="card-text clamp-2 skeleton-loader">${t.og_description}</p>
                                    <div class="d-flex justify-content-between align-items-end">
                                    <div>
                                     <span class="badge rounded-pill text-bg-primary skeleton-loader">${n.rss.channel.title}</span> 
                                     <span class="badge rounded-pill text-bg-success skeleton-loader">${t.category}</span> 
                                     </div>                                    
                                    <a href="${t.link}" class="text-primary link-underline link-underline-opacity-0">Visit</a>
                                   </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;o.append(t)})})}appendCategoriesToDOM(categoriesArray),appendChannelToDOM(categoriesArray),appendTpeToDOM(categoriesArray),document.addEventListener("DOMContentLoaded",async function(){var e="getcatogriesinfo";try{var t=await(await fetch(BASE_URI+"?"+e)).json();categoriesArray=t.catogries.map(function(e){return e.toLowerCase()})}catch(e){console.error("Error fetching data:",e)}await 0,await createSelect("videoCatogries",categoriesArray),await createSelect("videoCatogriess",categoriesArray),await appendCategoriesToDOM(categoriesArray)}),document.addEventListener("DOMContentLoaded",async function(){var e="getchannelinfo";try{var t=await fetch(BASE_URI+"?"+e),n=await(apiResponce=t).json();channelIdArray=n.channel.map(function(e){return e.toLowerCase()})}catch(e){console.error("Error fetching data:",e)}await 0,await createSelect("videoSelects",channelIdArray),await createSelect("videoSelectss",channelIdArray),await appendChannelToDOM(channelIdArray)}),document.addEventListener("DOMContentLoaded",async function(){var e="getvideoinfo";try{var t=await(await fetch(BASE_URI+"?"+e)).json();videoTypeId=t.videoinfo.map(function(e){return e.toLowerCase()})}catch(e){console.error("Error fetching data:",e)}await 0,await createSelect("videoType",videoTypeId),await createSelect("videoTypess",videoTypeId),await appendTpeToDOM(videoTypeId)}),fetchData(),document.addEventListener("click",function(e){var t,n,a,r,o,d,c;e.target.classList.contains("getModel")&&(t=e.target.parentElement.parentElement.cells[1].innerText,n=e.target.parentElement.parentElement.cells[2].lastChild.src,a=e.target.parentElement.parentElement.cells[3].innerText,r=e.target.parentElement.parentElement.cells[4].innerText,o=e.target.parentElement.parentElement.cells[5].innerText,d=e.target.parentElement.parentElement.cells[6].innerText,c=e.target.parentElement.parentElement.cells[7].innerText,e=e.target.parentElement.parentElement.cells[8].innerText,o=channelIdArray.indexOf(o),d=categoriesArray.indexOf(d),c=videoTypeId.indexOf(c),document.querySelector(".modalId").innerText=t,document.querySelector(".modalTitle").value=a,document.querySelector(".modalImage").value=n,document.querySelector(".modalDes").value=r,document.querySelector(".modalChecked").checked=1==e,document.querySelector(".modelVideoSelects").selectedIndex=o,document.querySelector(".modelVideoCatogries").selectedIndex=d,document.querySelector(".modelVideoType").selectedIndex=c)}),fetchDataAndPopulateContent(),$(document).ready(function(){setTimeout(function(){$("#cardContainer .skeleton-loader").addClass("d-none"),$("#cardContainer img, #cardContainer .card-title, #cardContainer .card-text, #cardContainer .badge, #cardContainer a").removeClass("d-none")},2e3)}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".getModel").forEach(function(o){o.addEventListener("click",function(e){var t=o.parentElement.parentElement.cells[1].innerText,n=(o.parentElement.parentElement.cells[2].lastChild.src,o.parentElement.parentElement.cells[3].innerText),a=o.parentElement.parentElement.cells[4].innerText,r=(o.parentElement.parentElement.cells[5].innerText,o.parentElement.parentElement.cells[6].innerText,o.parentElement.parentElement.cells[7].innerText,o.parentElement.parentElement.cells[8].innerText);document.querySelector(".modalId").innerText=t,document.querySelector(".modalTitle").value=n,document.querySelector(".modalDes").value=a,document.querySelector(".modalChecked").checked=1==r})}),document.querySelectorAll(".getModel")[0]}),$(document).ready(function(){const e="AIzaSyAvDMW8O-oJJd2iIP7ATyj8EgfmB7YZjHE";var t;$.ajax({type:"GET",url:"https://www.googleapis.com/youtube/v3/search",data:{key:e,part:"snippet",maxResults:1,type:"video",videoEmbeddable:!0},success:function(e){},error:function(e){}}),t="UC79ikm9mQLz_I53CKOBeXKA",$(document).ready(function(){$.ajax({url:"https://www.googleapis.com/youtube/v3/channels",method:"GET",data:{part:"statistics,snippet",id:t,key:e},success:function(e){var t=e.items[0].statistics,e=e.items[0].snippet;t.subscriberCount,e.title}})})});
//# sourceMappingURL=app.js.map